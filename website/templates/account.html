{% extends "template.html" %} {% block title %} My Account {% endblock %}

{% block content %} 
<!-- Account Page -->
<div class="account-section">
    <div class="row">
        <div class="col-lg-3">
            <!-- Account Details Column-->
            <div class="bini-member">
                <img src="{{ url_for('static', filename='assets/img/bini_member_6.jpg') }}" alt="Account Image" class="img-fluid">
            </div>
        </div>
        
        <!-- Right Column -->
        <div class="col-lg-9">

            <!-- Column Header -->
            <div class="col-lg-12 column-header">
                <h1> Welcome {{ current_user.username }}! </h1>
            </div>

            <!-- User Reviews Displayed Column-->
            <div class="col-lg-12 account-details">
                <h2>Account Details </h2>
                <!-- Account Details Column-->
                <h3>Username: {{ current_user.username }}</h3>
                <p>Email Address: {{ current_user.email }}</p>
                <p>User ID: {{ current_user.id }}</p>
                <p>Member since: {{ current_user.date_created.strftime('%B %d, %Y') }}</p>

                <!-- Button to trigger the update account popup -->
                <button type="button" class="btn btn-lg mb-1" data-toggle="modal" data-target="#accountModal">
                    Edit Account 
                </button>
                
                <a class="change_password" href="/change-password">
                    <button type="button" class="btn btn-lg"> Change Password </button>
                </a>

                <!-- Update account popup -->
                <div class="modal fade" id="accountModal" tabindex="-1" role="dialog" aria-labelledby="accountModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="accountModalLabel">Update Account Details</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="" enctype="multipart/form-data">
                                    {{ form.hidden_tag() }}
                                    <fieldset class="form-group">
                                        <legend class="border-bottom mb-4">Account Details</legend>
                                        <div class="form-group">
                                            {{ form.username.label(class="form-control-label") }}
                                            {% if form.username.errors %}
                                                {{ form.username(class="form-control form-control-lg is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.username.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.username(class="form-control form-control-lg") }}
                                            {% endif %}
                                        </div>

                                        <div class="form-group">
                                            {{ form.email.label(class="form-control-label") }}
                                            {% if form.email.errors %}
                                                {{ form.email(class="form-control form-control-lg is-invalid") }}
                                                <div class="invalid-feedback">
                                                    {% for error in form.email.errors %}
                                                        <span>{{ error }}</span>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                {{ form.email(class="form-control form-control-lg") }}
                                            {% endif %}
                                        </div>
                                    </fieldset>
                                    <div class="modal-footer">
                                        <div class="form-group">
                                            {{ form.submit(class="btn btn-lg") }}
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>
{% block footer %} 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
crossorigin="anonymous">
</script>

{% endblock %}

{% endblock %}



